---
title: DSL Reference
description: Complete reference for the Billyprints Domain Specific Language
---

Billyprints uses a simple text-based Domain Specific Language (DSL) to describe digital logic circuits. The script is bidirectional: changes in the script update the visual graph, and changes in the graph update the script.

## Core Concepts

The script defines two main things:
1. **Nodes**: Instances of gates or components.
2. **Connections**: Wires linking outputs to inputs.

## Syntax

### 1. Defining Nodes

Nodes are defined using the `@` symbol.

**Format:**
```
[Type] [Identifier] @ [X], [Y] [Flags]
```

- **Type**: The class of the node (e.g., `AND`, `OR`, `NOT`, `In`, `Out`, or a Custom Gate name).
- **Identifier**: A unique name for this instance (e.g., `n1`, `gateA`, `my_switch`).
- **X, Y**: The position of the node on the canvas (integers).
- **Flags**: Optional modifiers.
    - `momentary`: Only valid for `In` nodes. Makes the button a momentary push-button instead of a toggle switch.

**Examples:**
```
AND gate1 @ 100, 200
In sw1 @ 50, 50 momentary
Out led1 @ 300, 150
NAND logic_gate @ 400, 400
```

### 2. Defining Connections

Connections define how signals flow between nodes.

**Format:**
```
[SourceIdentifier].[OutputSlot] -> [TargetIdentifier].[InputSlot]
```

- **SourceIdentifier**: The ID of the node sending the signal.
- **OutputSlot**: The specific output pin (usually `out` for standard gates).
- **TargetIdentifier**: The ID of the node receiving the signal.
- **InputSlot**: The specific input pin (e.g., `in0`, `in1` for gates, or `in` for outputs).

**Shorthand:**
If a node has a default input/output (like standard gates), you can omit the slot name.
- `gate1 -> gate2` is equivalent to `gate1.out -> gate2.in` (simplification depends on node defaults).
- `In` nodes default to `out`.
- `Out` nodes default to `in`.

**Examples:**
```
// Standard Connection
gate1.out -> led1.in

// Connecting specific slots
sw1.out -> gate1.in0
sw2.out -> gate1.in1

// Implicit/Shorthand (if supported by context)
sw1 -> gate1
gate1 -> led1
```

### 3. Comments

Any line starting with `//` is treated as a comment and ignored by the parser.

```
// This is a comment
AND n1 @ 100, 100
```

### 4. Defining Custom Gates

You can define custom gates directly in your script using the `define...end` syntax.

**Format:**
```
define GateName(input1, input2, ...) -> (output1, output2, ...):
  signal = expression
  ...
end
```

**Primitive Operations:**
- `a AND b` - Logical AND
- `NOT a` - Logical NOT
- `GateName(args)` - Call a previously defined or loaded custom gate

**Example - Building an OR gate:**
```
define OR(a, b) -> (out):
  na = NOT a
  nb = NOT b
  t = na AND nb
  out = NOT t
end
```

**Example - Using a custom gate:**
```
define XOR(a, b) -> (out):
  na = NOT a
  nb = NOT b
  t1 = a AND nb
  t2 = na AND b
  out = OR(t1, t2)
end

// Now use it in the circuit
XOR gate1 @ 200, 100
In sw1 @ 50, 50
In sw2 @ 50, 150

sw1 -> gate1.in0
sw2 -> gate1.in1
```

**Rules:**
- Gates must be defined before they are used
- Nested calls are not allowed; use intermediate signals
- Input/output order determines slot numbering (`in0`, `in1`, `out0`, `out1`)

For detailed tutorials, see [Custom Gate Definitions](/docs/custom-gate-definitions).

---

## Standard Library

The following node types are built-in:

| Type | Inputs | Outputs | Description |
|------|--------|---------|-------------|
| `In` | 0 | 1 (`out`) | Interactive entry point (Switch/Button). |
| `Out` | 1 (`in`) | 0 | Visual indicator (LED). |
| `AND` | 2 (`in0`, `in1`) | 1 (`out`) | Output is HIGH only if both inputs are HIGH. |
| `NOT` | 1 (`in`) | 1 (`out`) | Inverts the input signal. |

**Note:** Other gates (OR, XOR, NAND, etc.) must be defined by the user or loaded from a gate library. See [Custom Gate Definitions](/docs/custom-gate-definitions) for examples.
